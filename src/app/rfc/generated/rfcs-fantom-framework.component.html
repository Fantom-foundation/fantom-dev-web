
    <div class="document-information">
      <dl id="identifiers">
        <dt class="label-stream">Stream:</dt>

        <dd class="stream">Internet Engineering Task Force (IETF)</dd>

        <dt class="label-rfc">RFC:</dt>

        <dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/info/rfc1912839.txt">1912839</a></dd>

        <dt class="label-category">Category:</dt>

        <dd class="category">Informational</dd>

        <dt class="label-published">Published:</dt>

        <dd class="published"><time class="published" datetime="2018-12-23">23 December 2018</time></dd>

        <dt class="label-issn">ISSN:</dt>

        <dd class="issn">2070-1721</dd>

        <dt class="label-authors">Author:</dt>

        <dd class="authors">
          <div class="author">
            <div class="author-name">R. Sharma</div>

            <div class="org">Fantom Foundation</div>
          </div>
        </dd>
      </dl>
    </div>

    <h1 id="title">Fantom Framework</h1>

    <div id="status-of-memo">
      <section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo"><a class="section-name selfRef" pageScroll href="#name-status-of-this-memo">Status of This Memo</a></h2>

        <p id="section-boilerplate.1-1">This document is not an
          Internet Standards Track specification; it is published for
          informational purposes.<a class="pilcrow" pageScroll href="#section-boilerplate.1-1">¶</a></p>

        <p id="section-boilerplate.1-2">This document is a product of
          the Internet Engineering Task Force (IETF). It represents the
          consensus of the IETF community. It has received public
          review and has been approved for publication by the Internet
          Engineering Steering Group (IESG). Not all documents approved
          by the IESG are candidates for any level of Internet
          Standard; see Section 2 of RFC 7841.<a class="pilcrow" pageScroll href="#section-boilerplate.1-2">¶</a></p>

        <p id="section-boilerplate.1-3">Information about the current
          status of this document, any errata, and how to provide
          feedback on it may be obtained at
          https://www.rfc-editor.org/info/rfc1912839.<a class="pilcrow" pageScroll href="#section-boilerplate.1-3">¶</a></p>
      </section>
    </div>

    <div id="copyright">
      <section id="section-boilerplate.2">
        <h2 id="name-copyright-notice"><a class="section-name selfRef" pageScroll href="#name-copyright-notice">Copyright Notice</a></h2>

        <p id="section-boilerplate.2-1">Copyright (c) 2018 IETF Trust
          and the persons identified as the document authors. All
          rights reserved.<a class="pilcrow" pageScroll href="#section-boilerplate.2-1">¶</a></p>

        <p id="section-boilerplate.2-2">This document is subject to
          BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
          Documents (http://trustee.ietf.org/license-info) in effect on
          the date of publication of this document. Please review these
          documents carefully, as they describe your rights and
          restrictions with respect to this document. Code Components
          extracted from this document must include Simplified BSD
          License text as described in Section 4.e of the Trust Legal
          Provisions and are provided without warranty as described in
          the Simplified BSD License.<a class="pilcrow" pageScroll href="#section-boilerplate.2-2">¶</a></p>
      </section>
    </div>

    <div id="toc">
      <section id="section-boilerplate.3"><a class="toplink" pageScroll href="#" onclick="scroll(0,0)">▲</a>
        <h2 id="name-table-of-contents"><a class="section-name selfRef" pageScroll href="#name-table-of-contents">Table of Contents</a></h2>

        <nav class="toc">
          <ul class="toc ulEmpty">
            <li class="toc ulEmpty" id="section-boilerplate.3-1.1">
              <p id="section-boilerplate.3-1.1.1"><a class="xref" pageScroll href="#section-1">1</a>. <a class="xref" pageScroll href="#name-introduction">Introduction</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.1.1">¶</a></p>
            </li>

            <li class="toc ulEmpty" id="section-boilerplate.3-1.2">
              <p id="section-boilerplate.3-1.2.1"><a class="xref" pageScroll href="#section-2">2</a>. <a class="xref" pageScroll href="#name-definitions">Definitions</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.2.1">¶</a></p>

              <ul class="toc ulEmpty">
                <li class="toc ulEmpty" id="section-boilerplate.3-1.2.2.1">
                  <p id="section-boilerplate.3-1.2.2.1.1"><a class="xref" pageScroll href="#section-2.1">2.1</a>. <a class="xref" pageScroll href="#name-fantom-network">Fantom
                    Network</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.2.2.1.1">¶</a></p>
                </li>

                <li class="toc ulEmpty" id="section-boilerplate.3-1.2.2.2">
                  <p id="section-boilerplate.3-1.2.2.2.1"><a class="xref" pageScroll href="#section-2.2">2.2</a>. <a class="xref" pageScroll href="#name-replicated-transaction-log">Replicated
                    Transaction Log</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.2.2.2.1">¶</a></p>
                </li>
              </ul>
            </li>

            <li class="toc ulEmpty" id="section-boilerplate.3-1.3">
              <p id="section-boilerplate.3-1.3.1"><a class="xref" pageScroll href="#section-3">3</a>. <a class="xref" pageScroll href="#name-interface">Interface</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.3.1">¶</a></p>
            </li>

            <li class="toc ulEmpty" id="section-boilerplate.3-1.4">
              <p id="section-boilerplate.3-1.4.1"><a class="xref" pageScroll href="#section-4">4</a>. <a class="xref" pageScroll href="#name-types">Types</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.4.1">¶</a></p>

              <ul class="toc ulEmpty">
                <li class="toc ulEmpty" id="section-boilerplate.3-1.4.2.1">
                  <p id="section-boilerplate.3-1.4.2.1.1"><a class="xref" pageScroll href="#section-4.1">4.1</a>. <a class="xref" pageScroll href="#name-transaction-hash">Transaction Hash</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.4.2.1.1">¶</a></p>
                </li>

                <li class="toc ulEmpty" id="section-boilerplate.3-1.4.2.2">
                  <p id="section-boilerplate.3-1.4.2.2.1"><a class="xref" pageScroll href="#section-4.2">4.2</a>. <a class="xref" pageScroll href="#name-absolute-order">Absolute
                    Order</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.4.2.2.1">¶</a></p>
                </li>

                <li class="toc ulEmpty" id="section-boilerplate.3-1.4.2.3">
                  <p id="section-boilerplate.3-1.4.2.3.1"><a class="xref" pageScroll href="#section-4.3">4.3</a>. <a class="xref" pageScroll href="#name-transaction-body">Transaction Body</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.4.2.3.1">¶</a></p>
                </li>
              </ul>
            </li>

            <li class="toc ulEmpty" id="section-boilerplate.3-1.5">
              <p id="section-boilerplate.3-1.5.1"><a class="xref" pageScroll href="#section-5">5</a>. <a class="xref" pageScroll href="#name-functions">Functions</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.5.1">¶</a></p>

              <ul class="toc ulEmpty">
                <li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.1">
                  <p id="section-boilerplate.3-1.5.2.1.1"><a class="xref" pageScroll href="#section-5.1">5.1</a>. <a class="xref" pageScroll href="#name-create">Create</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.5.2.1.1">¶</a></p>
                </li>

                <li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.2">
                  <p id="section-boilerplate.3-1.5.2.2.1"><a class="xref" pageScroll href="#section-5.2">5.2</a>. <a class="xref" pageScroll href="#name-read-by-key">Read by
                    Key</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.5.2.2.1">¶</a></p>
                </li>

                <li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.3">
                  <p id="section-boilerplate.3-1.5.2.3.1"><a class="xref" pageScroll href="#section-5.3">5.3</a>. <a class="xref" pageScroll href="#name-read-by-time-index">Read
                    by Time Index</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.5.2.3.1">¶</a></p>
                </li>
              </ul>
            </li>

            <li class="toc ulEmpty" id="section-boilerplate.3-1.6">
              <p id="section-boilerplate.3-1.6.1"><a class="xref" pageScroll href="#section-6">6</a>. <a class="xref" pageScroll href="#name-virtual-machine">Virtual Machine</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.6.1">¶</a></p>
            </li>

            <li class="toc ulEmpty" id="section-boilerplate.3-1.7">
              <p id="section-boilerplate.3-1.7.1"><a class="xref" pageScroll href="#section-7">7</a>. <a class="xref" pageScroll href="#name-fantom-world-state">Fantom World State</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.7.1">¶</a></p>

              <ul class="toc ulEmpty">
                <li class="toc ulEmpty" id="section-boilerplate.3-1.7.2.1">
                  <p id="section-boilerplate.3-1.7.2.1.1"><a class="xref" pageScroll href="#section-7.1">7.1</a>. <a class="xref" pageScroll href="#name-state-transition">State
                    Transition</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.7.2.1.1">¶</a></p>
                </li>
              </ul>
            </li>

            <li class="toc ulEmpty" id="section-boilerplate.3-1.8">
              <p id="section-boilerplate.3-1.8.1"><a class="xref" pageScroll href="#section-8">8</a>. <a class="xref" pageScroll href="#name-verified-computation-certif">Verified
                Computation Certificates</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.8.1">¶</a></p>
            </li>

            <li class="toc ulEmpty" id="section-boilerplate.3-1.9">
              <p id="section-boilerplate.3-1.9.1"> <a class="xref" pageScroll href="#name-authors-address">Author's Address</a><a class="pilcrow" pageScroll href="#section-boilerplate.3-1.9.1">¶</a></p>
            </li>
          </ul>
        </nav>
      </section>
    </div>

    <div id="introduction">
      <section id="section-1">
        <h2 id="name-introduction"> <a class="section-number selfRef" pageScroll href="#section-1">1. </a><a class="section-name selfRef" pageScroll href="#name-introduction">Introduction</a></h2>

        <p id="section-1-1">The Fantom framework is a framework for
          building distributed applications that run on a trustless
          network.<a class="pilcrow" pageScroll href="#section-1-1">¶</a></p>

        <p id="section-1-2">The Fantom framework consists of two main
          components:<a class="pilcrow" pageScroll href="#section-1-2">¶</a></p>

        <ol class="normal" id="section-1-3" start="1" type="1">
          <li id="section-1-3.1">
            <p id="section-1-3.1.1">Replicated Transaction Log<a class="pilcrow" pageScroll href="#section-1-3.1.1">¶</a></p>
          </li>

          <li id="section-1-3.2">
            <p id="section-1-3.2.1">Virtual Machine<a class="pilcrow" pageScroll href="#section-1-3.2.1">¶</a></p>
          </li>
        </ol>
      </section>
    </div>

    <div id="definitions">
      <section id="section-2">
        <h2 id="name-definitions"> <a class="section-number selfRef" pageScroll href="#section-2">2. </a><a class="section-name selfRef" pageScroll href="#name-definitions">Definitions</a></h2>

        <div id="fantom-network">
          <section id="section-2.1">
            <h3 id="name-fantom-network"> <a class="section-number selfRef" pageScroll href="#section-2.1">2.1. </a><a class="section-name selfRef" pageScroll href="#name-fantom-network">Fantom Network</a></h3>

            <p id="section-2.1-1">The Fantom network consists of a
              group of participants that agree or disagree on the
              occurence of events using the Lachesis consensus
              protocol.<a class="pilcrow" pageScroll href="#section-2.1-1">¶</a></p>
          </section>
        </div>

        <div id="replicated-transaction-log">
          <section id="section-2.2">
            <h3 id="name-replicated-transaction-log"> <a class="section-number selfRef" pageScroll href="#section-2.2">2.2. </a><a class="section-name selfRef" pageScroll href="#name-replicated-transaction-log">Replicated
              Transaction Log</a></h3>

            <p id="section-2.2-1">Fantom network participants propose
              transactions to be appended to the replicated transaction
              log. Transactions are validated and appended to the
              transaction through the the Lachesis consensus
              protocol.<a class="pilcrow" pageScroll href="#section-2.2-1">¶</a></p>

            <p id="section-2.2-2">The replicated event log is used to
              keep a immutable record of all bytecode executed on the
              Fantom virtual machine. A participating node on the
              fantom network must provide an interface for Fantom
              virtual machine to retreive ordered fantom bytecode and
              store fantom bytecode from the replicated event log.<a class="pilcrow" pageScroll href="#section-2.2-2">¶</a></p>

            <p id="section-2.2-3">Typically a consensus algorithm
              would be used to implement this replicated transaction
              log.<a class="pilcrow" pageScroll href="#section-2.2-3">¶</a></p>
          </section>
        </div>
      </section>
    </div>

    <div id="interface">
      <section id="section-3">
        <h2 id="name-interface"> <a class="section-number selfRef" pageScroll href="#section-3">3. </a><a class="section-name selfRef" pageScroll href="#name-interface">Interface</a></h2>
      </section>
    </div>

    <div id="types">
      <section id="section-4">
        <h2 id="name-types"> <a class="section-number selfRef" pageScroll href="#section-4">4. </a><a class="section-name selfRef" pageScroll href="#name-types">Types</a></h2>

        <div id="transaction-hash">
          <section id="section-4.1">
            <h3 id="name-transaction-hash"> <a class="section-number selfRef" pageScroll href="#section-4.1">4.1. </a><a class="section-name selfRef" pageScroll href="#name-transaction-hash">Transaction Hash</a></h3>

            <p id="section-4.1-1">Unique 256 bit key<a class="pilcrow" pageScroll href="#section-4.1-1">¶</a></p>

            <div id="section-4.1-2">
              <pre class="sourcecode lang-rust">type TxHash = [u8; 32];
</pre>
              <a class="pilcrow" pageScroll href="#section-4.1-2">¶</a></div>
          </section>
        </div>

        <div id="absolute-order">
          <section id="section-4.2">
            <h3 id="name-absolute-order"> <a class="section-number selfRef" pageScroll href="#section-4.2">4.2. </a><a class="section-name selfRef" pageScroll href="#name-absolute-order">Absolute Order</a></h3>

            <p id="section-4.2-1">64 bit unsigned integer representing
              the absolute order of the transaction where the index 0
              is absolute order of the oldest event.<a class="pilcrow" pageScroll href="#section-4.2-1">¶</a></p>

            <div id="section-4.2-2">
              <pre class="sourcecode lang-rust">type TimeIndex = u64;
</pre>
              <a class="pilcrow" pageScroll href="#section-4.2-2">¶</a></div>
          </section>
        </div>

        <div id="transaction-body">
          <section id="section-4.3">
            <h3 id="name-transaction-body"> <a class="section-number selfRef" pageScroll href="#section-4.3">4.3. </a><a class="section-name selfRef" pageScroll href="#name-transaction-body">Transaction Body</a></h3>

            <p id="section-4.3-1">Byte array that typically contains
              the<a class="pilcrow" pageScroll href="#section-4.3-1">¶</a></p>

            <div id="section-4.3-2">
              <pre class="sourcecode lang-rust">type TxBody = Vec&lt;u8&gt;;
</pre>
              <a class="pilcrow" pageScroll href="#section-4.3-2">¶</a></div>
          </section>
        </div>
      </section>
    </div>

    <div id="functions">
      <section id="section-5">
        <h2 id="name-functions"> <a class="section-number selfRef" pageScroll href="#section-5">5. </a><a class="section-name selfRef" pageScroll href="#name-functions">Functions</a></h2>

        <div id="create">
          <section id="section-5.1">
            <h3 id="name-create"> <a class="section-number selfRef" pageScroll href="#section-5.1">5.1. </a><a class="section-name selfRef" pageScroll href="#name-create">Create</a></h3>

            <p id="section-5.1-1">Submits a transaction to the network
              for confirmation. This function is not guaranteed to be
              successful. read<em>by</em>key can be used to check if
              this function call was successful.<a class="pilcrow" pageScroll href="#section-5.1-1">¶</a></p>

            <div id="section-5.1-2">
              <pre class="sourcecode lang-rust">fn submit_tx(k: key, v: Value) -&gt; Result&lt;TimeIndex, TransactionStatus&gt;;
</pre>
              <a class="pilcrow" pageScroll href="#section-5.1-2">¶</a></div>
          </section>
        </div>

        <div id="read-by-key">
          <section id="section-5.2">
            <h3 id="name-read-by-key"> <a class="section-number selfRef" pageScroll href="#section-5.2">5.2. </a><a class="section-name selfRef" pageScroll href="#name-read-by-key">Read by Key</a></h3>

            <p id="section-5.2-1">Fetch a stored value by its key. A
              None return value indicates that the there is no value
              corresponding to that key. This function can be used to
              whether a create operation has failed or not.<a class="pilcrow" pageScroll href="#section-5.2-1">¶</a></p>

            <div id="section-5.2-2">
              <pre class="sourcecode lang-rust">fn get_tx_by_key(k: Key) -&gt; Option&lt;(TimeIndex, Value)&gt;;
</pre>
              <a class="pilcrow" pageScroll href="#section-5.2-2">¶</a></div>
          </section>
        </div>

        <div id="read-by-time-index">
          <section id="section-5.3">
            <h3 id="name-read-by-time-index"> <a class="section-number selfRef" pageScroll href="#section-5.3">5.3. </a><a class="section-name selfRef" pageScroll href="#name-read-by-time-index">Read by Time Index</a></h3>

            <p id="section-5.3-1">The time ordered retrieval function
              allows Fantom virtual machines to fetch programs from the
              replicated data store and execute them in the correct
              order to arrive at the same world state.<a class="pilcrow" pageScroll href="#section-5.3-1">¶</a></p>

            <div id="section-5.3-2">
              <pre class="sourcecode lang-rust">fn read_by_time_index(i: TimeIndex) -&gt; Option&lt;(Key, Value)&gt;;
</pre>
              <a class="pilcrow" pageScroll href="#section-5.3-2">¶</a></div>
          </section>
        </div>
      </section>
    </div>

    <div id="virtual-machine">
      <section id="section-6">
        <h2 id="name-virtual-machine"> <a class="section-number selfRef" pageScroll href="#section-6">6. </a><a class="section-name selfRef" pageScroll href="#name-virtual-machine">Virtual Machine</a></h2>

        <p id="section-6-1">The role of the Fantom virtual machine is
          to execute Fantom programs in a deterministic manner to build
          a world state for Fantom applications.<a class="pilcrow" pageScroll href="#section-6-1">¶</a></p>

        <p id="section-6-2">This document defines the interface a
          Fantom Virtual machine must implement.<a class="pilcrow" pageScroll href="#section-6-2">¶</a></p>
      </section>
    </div>

    <div id="fantom-world-state">
      <section id="section-7">
        <h2 id="name-fantom-world-state"> <a class="section-number selfRef" pageScroll href="#section-7">7. </a><a class="section-name selfRef" pageScroll href="#name-fantom-world-state">Fantom World State</a></h2>

        <p id="section-7-1">Todo: describe the world state data
          structure and how fantom programs interact with it.<a class="pilcrow" pageScroll href="#section-7-1">¶</a></p>

        <div id="section-7-2">
          <pre class="sourcecode lang-rust">type State = Vec&lt;u8&gt;
</pre>
          <a class="pilcrow" pageScroll href="#section-7-2">¶</a></div>

        <div id="state-transition">
          <section id="section-7.1">
            <h3 id="name-state-transition"> <a class="section-number selfRef" pageScroll href="#section-7.1">7.1. </a><a class="section-name selfRef" pageScroll href="#name-state-transition">State Transition</a></h3>

            <p id="section-7.1-1">The Fantom virtual machine must
              implement a function to transition from the fantom world
              state to another. Invalid programs must return a error
              result. Valid programs return the new world state.<a class="pilcrow" pageScroll href="#section-7.1-1">¶</a></p>

            <div id="section-7.1-2">
              <pre class="sourcecode lang-rust">fn transition(State, Program) -&gt; Result&lt;State, Error&gt;;
</pre>
              <a class="pilcrow" pageScroll href="#section-7.1-2">¶</a></div>

            <p id="section-7.1-3">A program consists of virtual
              machine bytecode.<a class="pilcrow" pageScroll href="#section-7.1-3">¶</a></p>

            <div id="section-7.1-4">
              <pre class="sourcecode lang-rust">type Program = Vec&lt;u8&gt;;
</pre>
              <a class="pilcrow" pageScroll href="#section-7.1-4">¶</a></div>

            <p id="section-7.1-5">The Fantom virtual machine acquires
              programs from the replicated data store in time order and
              execute them to build the world state. The Fantom virtual
              machine uses the read<em>by</em>time_index API provided
              by the replicated datastore to acquire programs in time
              order.<a class="pilcrow" pageScroll href="#section-7.1-5">¶</a></p>
          </section>
        </div>
      </section>
    </div>

    <div id="verified-computation-certificates">
      <section id="section-8">
        <h2 id="name-verified-computation-certif"> <a class="section-number selfRef" pageScroll href="#section-8">8. </a><a class="section-name selfRef" pageScroll href="#name-verified-computation-certif">Verified
          Computation Certificates</a></h2>

        <p id="section-8-1">Unlike the Ethereum virtual machine, the
          Fantom virtual machine does not require every participant to
          compute the next state to verify it. Participants must
          generate a certificate to prove that the state transition
          caused by their submitted transaction is valid. Other
          participants only need to verify the certificate to esnure
          the computed state is correct.<a class="pilcrow" pageScroll href="#section-8-1">¶</a></p>
      </section>
    </div>

    <div id="authors-addresses">
      <section id="section-appendix.a">
        <h2 id="name-authors-address"><a class="section-name selfRef" pageScroll href="#name-authors-address">Author's Address</a></h2>

        

        <div class="email"> <span>Email:</span> <a class="email" href="mailto:rishab.sharma@fantom.foundation">rishab.sharma@fantom.foundation</a></div>
      </section>
    </div>

    
